<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Logic Engine - Live Sync</title>
    <style>
        :root { --primary: #1a73e8; --success: #28a745; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); padding: 20px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 480px; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--primary); margin-bottom: 5px; }
        .sub-text { text-align: center; font-size: 0.8em; color: #666; margin-bottom: 25px; }
        
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: bold; color: #444; font-size: 0.9em; }
        input { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 10px; font-size: 16px; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--primary); }
        input[readonly] { background: #f9f9f9; color: #777; cursor: not-allowed; }

        .btn-sync { background: #e8f0fe; color: var(--primary); border: none; padding: 12px; width: 100%; border-radius: 10px; cursor: pointer; font-weight: bold; margin-bottom: 15px; transition: 0.3s; }
        .btn-sync:hover { background: #d2e3fc; }
        .btn-calc { background: var(--success); color: white; border: none; padding: 15px; width: 100%; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); }
        .btn-calc:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4); }
        
        .result-box { margin-top: 25px; padding: 20px; background: #f8f9fa; border-left: 5px solid var(--success); border-radius: 10px; display: none; }
        #status-msg { font-size: 0.8em; text-align: center; margin-bottom: 10px; color: #28a745; font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>üß¨ Causal Logic Engine</h2>
    <div class="sub-text">‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô 15:40 ‡∏ô.</div>

    <div id="status-msg"></div>

    <div class="input-group">
        <label>üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (Calendar Icon)</label>
        <input type="date" id="drawDate" value="2026-01-17">
    </div>

    <button class="btn-sync" onclick="syncData()">üîÑ Sync ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Cloud</button>

    <div style="border-top: 1px solid #eee; margin: 20px 0;"></div>

    <div class="input-group">
        <label>üå°Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå (¬∞C)</label>
        <input type="number" id="temp" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Sync..." readonly>
    </div>

    <div class="input-group">
        <label>üåë ‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå (Gravity Factor)</label>
        <input type="text" id="moon" readonly>
    </div>

    <div class="input-group">
        <label>üéÜ ‡πÄ‡∏•‡∏Ç Social Energy (‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°)</label>
        <input type="text" id="events" placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏™‡∏±‡∏á‡∏Ñ‡∏°" readonly>
    </div>

    <button class="btn-calc" onclick="runAnalysis()">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏ú‡∏•</button>

    <div id="resultArea" class="result-box">
        <strong style="color: var(--success);">üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:</strong>
        <p id="analysisOutput" style="font-size: 0.95em; line-height: 1.6; margin-top: 10px;"></p>
    </div>
</div>

<script>
async function syncData() {
    const selectedDate = document.getElementById('drawDate').value;
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô Raw URL ‡∏Ç‡∏≠‡∏á Gist ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏£‡∏¥‡∏á‡πÜ
    const gistURL = "https://gist.githubusercontent.com/kittipan1984/f7a042eef3ccbcf7000c5ff84a0a53c3/raw/lottery-config.json"; 
    const statusMsg = document.getElementById('status-msg');

    try {
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° Timestamp ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤ (Cache)
        const response = await fetch(gistURL + "?t=" + new Date().getTime());
        const data = await response.json();
        
        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Gist
        const match = data.draws.find(d => d.date === selectedDate);

        if (match) {
            document.getElementById('temp').value = match.recommendedTemp;
            document.getElementById('moon').value = match.lunarPhase;
            document.getElementById('events').value = match.suggestedSocial;
            statusMsg.innerText = "‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Cloud ‡∏á‡∏ß‡∏î‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà " + selectedDate + " ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
        } else {
            statusMsg.style.color = "#d93025";
            statusMsg.innerText = "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Gist (‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏≥‡∏£‡∏≠‡∏á)";
            // ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Å‡∏£‡∏ì‡∏µ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
            autoFillBackup(selectedDate);
        }
    } catch (error) {
        statusMsg.style.color = "#d93025";
        statusMsg.innerText = "‚ùå ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå Gist)";
        autoFillBackup(selectedDate);
    }
}

function autoFillBackup(dateStr) {
    // Logic ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Gist
    document.getElementById('temp').value = "25";
    document.getElementById('moon').value = "Standard";
    document.getElementById('events').value = "00, 11, 22"; // ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
}

function runAnalysis() {
    const date = document.getElementById('drawDate').value;
    const temp = document.getElementById('temp').value;
    
    if(!temp) { alert("‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Sync ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö"); return; }

    document.getElementById('resultArea').style.display = "block";
    document.getElementById('analysisOutput').innerHTML = 
        `‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: <b>${date}</b><br>` +
        `‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <b>Causal Logic v1.3 Active</b><br>` +
        `‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`;
}
</script>

</body>
</html>
