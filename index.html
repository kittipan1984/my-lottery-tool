<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Logic Engine PRO v2.2</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1a73e8; --success: #10b981; --bg: #f8fafc; --card: #ffffff; --border: #e2e8f0; }
        body { font-family: 'Prompt', sans-serif; background: var(--bg); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 480px; background: var(--card); border-radius: 20px; padding: 35px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); border: 1px solid var(--border); }
        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { font-size: 1.4rem; color: var(--primary); margin: 0; }
        .status-badge { font-size: 0.75rem; padding: 4px 12px; border-radius: 50px; background: #e8f0fe; color: var(--primary); display: inline-block; margin-top: 8px; font-weight: 600; }
        .input-group { margin-bottom: 15px; }
        label { font-size: 0.8rem; color: #64748b; display: block; margin-bottom: 5px; font-weight: 600; }
        input { width: 100%; border: 1px solid var(--border); border-radius: 10px; padding: 12px; font-size: 1rem; box-sizing: border-box; outline: none; }
        input[readonly] { background: #f1f5f9; color: #475569; border-style: dashed; }
        .btn { width: 100%; padding: 15px; border-radius: 12px; font-weight: 600; cursor: pointer; border: none; font-size: 1rem; margin-bottom: 10px; transition: 0.3s; font-family: 'Prompt'; }
        .btn-sync { background: #fff; color: var(--primary); border: 1.5px solid var(--primary); }
        .btn-main { background: var(--primary); color: white; }
        .result-panel { margin-top: 25px; display: none; border-top: 1px solid #eee; padding-top: 20px; }
        .result-item { background: #fff; border: 1px solid #f0f4f8; border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .number { font-size: 1.6rem; font-weight: 600; color: #1e293b; }
        .rating-val { font-size: 1.1rem; font-weight: 600; color: var(--success); }
        .rating-label { font-size: 0.7rem; color: #94a3b8; display: block; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>CAUSAL ENGINE PRO</h1>
        <div id="status" class="status-badge">AWAITING INPUT</div>
    </div>

    <div class="input-group">
        <label>TARGET DATE</label>
        <input type="date" id="drawDate" value="2026-01-17">
    </div>

    <button class="btn btn-sync" onclick="syncData()">ðŸ”„ AUTO-FILL SYNC</button>

    <div class="input-group">
        <label>TEMP INDEX (Â°C)</label>
        <input type="text" id="temp" readonly placeholder="--">
    </div>

    <div class="input-group">
        <label>MOON PHASE</label>
        <input type="text" id="moon" readonly placeholder="--">
    </div>

    <input type="hidden" id="socialNumbers">

    <button class="btn btn-main" onclick="runPureLogic()">ðŸš€ ANALYZE CAUSAL RATING</button>

    <div id="resultArea" class="result-panel">
        <div style="font-size: 0.85rem; font-weight: 600; margin-bottom: 15px; color: var(--primary);">RESULT BY RATING POINTS</div>
        <div id="displayArea"></div>
    </div>
</div>

<script>
    const GIST_URL = "https://gist.githubusercontent.com/kittipan1984/f7a042eef3ccbcf7000c5ff84a0a53c3/raw/lottery-config.json";

    async function syncData() {
        const date = document.getElementById('drawDate').value;
        const status = document.getElementById('status');
        status.innerText = "SYNCING...";
        try {
            const res = await fetch(GIST_URL + "?t=" + new Date().getTime());
            const data = await res.json();
            const match = data.draws.find(d => d.date === date);
            if (match) {
                document.getElementById('temp').value = match.recommendedTemp;
                document.getElementById('moon').value = match.lunarPhase;
                document.getElementById('socialNumbers').value = match.suggestedSocial;
                status.innerText = "SYNC SUCCESS";
                status.style.color = "#28a745";
            }
        } catch (e) { alert("Sync Failed"); }
    }

    function runPureLogic() {
        const raw = document.getElementById('socialNumbers').value;
        const temp = parseInt(document.getElementById('temp').value) || 0;
        const moon = document.getElementById('moon').value;
        if(!raw) return alert("Please sync data first.");

        let numbers = raw.split(',').map(n => n.trim());
        
        // --- PURE ANALYTICAL LOGIC (No Hardcoding) ---
        let scored = numbers.map(num => {
            let score = 7.5; // à¸„à¸°à¹à¸™à¸™à¸à¸²à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹€à¸—à¹ˆà¸²à¸à¸±à¸™à¸—à¸¸à¸à¸•à¸±à¸§
            
            // 1. Parity Logic: à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´à¸ªà¹ˆà¸‡à¸œà¸¥à¸•à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸ªà¸¡à¸”à¸¸à¸¥à¹€à¸¥à¸‚à¸„à¸¹à¹ˆà¸„à¸µà¹ˆ
            // à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡: à¸–à¹‰à¸²à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´à¹€à¸›à¹‡à¸™à¹€à¸¥à¸‚à¸„à¸¹à¹ˆ à¹€à¸¥à¸‚à¸—à¹‰à¸²à¸¢à¸—à¸µà¹ˆà¸¥à¸‡à¸”à¹‰à¸§à¸¢à¹€à¸¥à¸‚à¸„à¸¹à¹ˆà¸ˆà¸°à¹„à¸”à¹‰à¸„à¸°à¹à¸™à¸™à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¸¶à¹‰à¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢
            let lastDigit = parseInt(num.slice(-1));
            if (lastDigit % 2 === temp % 2) score += 0.8;

            // 2. Magnitude Logic: à¸ªà¸ à¸²à¸§à¸°à¸”à¸§à¸‡à¸ˆà¸±à¸™à¸—à¸£à¹Œà¸ªà¹ˆà¸‡à¸œà¸¥à¸•à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸«à¸™à¸²à¹à¸™à¹ˆà¸™à¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸¥à¸‚
            // Full Moon: à¸¡à¸±à¸à¸ˆà¸°à¸à¸£à¸°à¸•à¸¸à¹‰à¸™à¹€à¸¥à¸‚à¸à¸¥à¸¸à¹ˆà¸¡à¸ªà¸¹à¸‡ / New Moon: à¸à¸¥à¸¸à¹ˆà¸¡à¹€à¸¥à¸‚à¸•à¹ˆà¸³
            if (moon.includes("Full") && parseInt(num) > (num.length === 3 ? 500 : 50)) score += 0.6;
            if (moon.includes("New") && parseInt(num) <= (num.length === 3 ? 500 : 50)) score += 0.6;

            // 3. Mathematical Spread: à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹€à¸šà¸µà¹ˆà¸¢à¸‡à¹€à¸šà¸™à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹€à¸žà¸·à¹ˆà¸­à¸ˆà¸±à¸”à¸¥à¸³à¸”à¸±à¸š
            score += (parseInt(num) % 7) * 0.1; 

            return { val: num, pt: score.toFixed(1) };
        });

        // à¸ˆà¸±à¸”à¸¥à¸³à¸”à¸±à¸šà¹€à¸¥à¸‚à¸—à¸µà¹ˆ Rating à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸‚à¸¶à¹‰à¸™à¸à¹ˆà¸­à¸™
        scored.sort((a, b) => b.pt - a.pt);

        const display = document.getElementById('displayArea');
        display.innerHTML = "";
        scored.forEach(item => {
            display.innerHTML += `
                <div class="result-item">
                    <div class="number">${item.val}</div>
                    <div style="text-align:right;">
                        <span class="rating-label">Rating</span>
                        <span class="rating-val">${item.pt} Pts</span>
                    </div>
                </div>
            `;
        });
        document.getElementById('resultArea').style.display = "block";
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>
</body>
</html>
